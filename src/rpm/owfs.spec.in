%define kernelversion %(uname -r)
%define fusemoduledir /lib/modules/%{kernelversion}/kernel/fs/fuse

%define kernelrel %(uname -r | sed -e s/-/_/g)
%define real_release 6

Name: owfs
Version: @VERSION@
Release: 1
Summary: 1-Wire Virtual File System
Source: %{name}-%{version}.tar.gz
Copyright: GPL
Group: Utilities/System
URL: http://sourceforge.net/projects/owfs
Buildroot: %{_tmppath}/%{name}-root
Prefix: /usr
Packager: Vadim Tkachenko <vt@freehold.crocodile.org>
Requires: fuse = 1.0, owlib = 0.0p1
%description

OWFS is a userspace virtual filesystem providing access to 1-Wire networks.


%clean
case "$RPM_BUILD_ROOT" in *-root) rm -rf $RPM_BUILD_ROOT ;; esac

%prep
%setup

%build
./configure --prefix=%{prefix}
make
make check

%install
case "$RPM_BUILD_ROOT" in *-root) rm -rf $RPM_BUILD_ROOT ;; esac
make install \
	prefix=$RPM_BUILD_ROOT%{prefix}

%post

%preun

%postun


%files
%defattr(-,root,root)
%doc README NEWS INSTALL ChangeLog AUTHORS COPYING

%{prefix}/bin/owfs
%{prefix}/include/owfs_config.h

%changelog

* Tue Oct 7 2003 Vadim Tkachenko <vt@freehold.crocodile.org>
- Initial take at RPM build
